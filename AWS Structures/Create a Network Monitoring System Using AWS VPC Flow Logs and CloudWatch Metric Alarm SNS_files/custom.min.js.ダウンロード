var accItem = document.getElementsByClassName('accordionItem');
var accHD = document.getElementsByClassName('accordionItemHeading');
for (i = 0; i < accHD.length; i++) {
    accHD[i].addEventListener('click', toggleItem, false);
}
function toggleItem() {  
    var itemClass = this.parentNode.className;
    $('.accordionItemHeading').find('i').removeClass('fa-minus').addClass('fa-plus');    
    for (i = 0; i < accItem.length; i++) {
        accItem[i].className = 'accordionItem accordionclose';
    }
    if (itemClass == 'accordionItem accordionclose') {
        this.parentNode.className = 'accordionItem accordionopen';
        $(this).find('i').removeClass('fa-plus').addClass('fa-minus');        
    }
}

$(document).on('click', '.show-validation-result', function (e) {

    $(".loader").show();
    var validationResultId = $(this).data('id');
    $.ajax({
        type: 'post',
        url:baseUrl + '/site/generate_lab_result',
        data: {'validationResultId':validationResultId},
        success: function (data) {          
          $(".loader").hide();
          $(".labValOutputResult").empty();
          var obj = JSON.parse(data);
          var error_flag = obj.error_flag;
              //Check error occured or not
              if (error_flag==1)
              {
                var error_message = obj.message;
                swal({
                  title: error_message.message,
                  text: error_message.message_detail,
                  button: "OK",
                  icon: "info",
                  dangerMode: true,
              });
                return false;
            }
            else
            {
                var result = obj.result;
                if(result != null){
                    $(".labValOutputResult").append(result);
                    $('#labValidationResultModal').modal('show');
                }
                return false;
            }
        }
    });

});